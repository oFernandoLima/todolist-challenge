<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container">
    <%= link_to "üìù TodoList",
        (user_signed_in? ? authenticated_root_path : unauthenticated_root_path),
        class: "navbar-brand fw-bold" %>

    <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="mainNavbar"
         class="collapse navbar-collapse flex-column flex-lg-row align-items-end align-items-lg-center">
      <ul class="navbar-nav flex-column flex-lg-row align-items-end align-items-lg-center mb-2 mb-lg-0 me-lg-3">
        <% if user_signed_in? %>
          <li class="nav-item">
            <%= link_to "Minhas Listas", task_lists_path, class: "nav-link #{'active' if current_page?(task_lists_path)}" %>
          </li>
          <li class="nav-item">
            <%= link_to collaboration_invites_path, class: "nav-link #{'active' if current_page?(collaboration_invites_path)}" do %>
              Convites
              <% if (pending_invites_count || 0) > 0 %>
                <span class="badge rounded-pill text-bg-warning ms-1"><%= pending_invites_count %></span>
              <% end %>
            <% end %>
          </li>
        <% end %>
      </ul>

      <div class="d-flex flex-lg-row justify-content-end align-items-center gap-2 mt-2 mt-lg-0 ms-lg-auto">
        <% if user_signed_in? %>
          <span class="text-white small">Ol√°, <%= current_user.name.presence || 'User' %></span>
          <%= button_to "Sair", destroy_user_session_path, method: :delete,
                class: "btn btn-outline-light btn-sm",
                form: { class: "d-inline" } %>
        <% else %>
          <%= link_to "Entrar", new_user_session_path, class: "btn btn-outline-light btn-sm text-end" %>
          <%= link_to "Registrar", new_user_registration_path, class: "btn btn-light btn-sm text-end" %>
        <% end %>
      </div>
    </div>
  </div>
</nav>